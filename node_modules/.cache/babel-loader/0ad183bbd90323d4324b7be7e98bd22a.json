{"ast":null,"code":"import _classCallCheck from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ben/Documents/React/paris-js-0918-groupe2-react/src/components/creanciers.js\";\nimport React, { Component } from \"react\";\nimport supprimer from \"./Icones_Arigoni/icone_supprimer.png\";\nimport modifier from \"./Icones_Arigoni/icone_modifier.png\";\nimport { NavLink } from \"react-router-dom\";\nimport \"./debiteurs\";\nimport Axios from \"axios\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport \"react-confirm-alert/src/react-confirm-alert.css\"; //import formulairedebiteurs et formulairecreacier pour les routes\n\nvar Creanciers =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Creanciers, _Component);\n\n  function Creanciers() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Creanciers);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Creanciers)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      creanciers: [],\n      creanciersFiltered: [],\n      creanciersSearch: \"\",\n      myReloadCounter: 0\n    };\n\n    _this.reloadNow = function (id) {\n      _this.setState(function (previousState) {\n        return {\n          creanciers: previousState.creanciers,\n          creanciersFiltered: previousState.creanciersFiltered.filter(function (creancier) {\n            return creancier.id !== id;\n          }),\n          myReloadCounter: _this.state.myReloadCounter + 1\n        };\n      });\n\n      _this.forceUpdate();\n    };\n\n    _this.handleDelete = function (id, denomination) {\n      var myId = id;\n      confirmAlert({\n        title: \"Merci de confirmer\",\n        message: \"Voulez-vous vraiment supprimer ce créancier ?\",\n        buttons: [{\n          label: \"Oui\",\n          onClick: function onClick() {\n            return Axios.put(\"http://localhost:4848/api/creanciers/\".concat(myId), {\n              active: \"false\"\n            }).then(function (response) {\n              _this.reloadNow(myId);\n\n              alert(\"Le cr\\xE9ancier \".concat(denomination, \" a bien \\xE9t\\xE9 supprim\\xE9.\"));\n              console.log(response);\n            }).catch(function (error) {\n              console.log(error);\n            });\n          }\n        }, {\n          label: \"Non\" // onClick: () => alert(\"Le créancier n'a pas été supprimé.\")\n\n        }]\n      });\n    };\n\n    _this.mySearch = function () {\n      _this.setState({\n        creanciersFiltered: _this.state.creanciersFiltered.filter(function (creancier) {\n          return creancier.denomination_sociale.toLowerCase().includes(_this.state.creanciersSearch.toLowerCase());\n        })\n      });\n    };\n\n    _this.handleSearch = function (e) {\n      _this.setState({\n        creanciersSearch: e.target.value\n      });\n\n      if (_this.state.creanciersSearch.length > 1) {\n        _this.mySearch();\n      } else {\n        _this.setState({\n          creanciersFiltered: _this.state.creanciers.filter(function (creancier) {\n            return creancier.active;\n          })\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  _createClass(Creanciers, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Axios.get(\"http://localhost:4848/api/creanciers\").then(function (response) {\n        _this2.setState({\n          // returns all creanciers\n          creanciers: response.data,\n          // returns all creanciers whose active status is true\n          creanciersFiltered: response.data.filter(function (creancier) {\n            return creancier.active;\n          })\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var myCreanciers = this.state.creanciersFiltered;\n      var myReloadCounter = this.state.myReloadCounter;\n      return (//tableau informations des créanciers\n        React.createElement(\"div\", {\n          className: \"creancier\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"fl w-60\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"title_cr\\xE9ancier pl4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"f2 lh-copy nowrap\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, \"Informations sur les cr\\xE9anciers\"), React.createElement(\"h2\", {\n          className: \"pt2 f4 lh-copy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, \"Liste des cr\\xE9anciers\"))), React.createElement(\"div\", {\n          className: \"fl w-40\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"wraparigo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"searcharigo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"text\",\n          className: \"searchTerm\",\n          placeholder: \"trouver un cr\\xE9ancier\",\n          onChange: this.handleSearch,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 120\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          type: \"submit\",\n          className: \"searchButton\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          className: \"fa fa-search\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }))))), React.createElement(\"div\", {\n          className: \" tableau fl w-100 pa4 \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 134\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"overflow-auto\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 135\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          className: \"f6 w-100 center\",\n          cellSpacing: \"0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 136\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 137\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          className: \"stripe-dark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, \"D\\xE9nomination sociale\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 140\n          },\n          __self: this\n        }, \"Forme juridique\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, \"Pays\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, \"Modifier\"), React.createElement(\"th\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, \"Supprimer\"))), React.createElement(\"tbody\", {\n          className: \"lh-copy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, myCreanciers.slice(10).map(function (creancier) {\n          return React.createElement(\"tr\", {\n            className: \"stripe-dark\",\n            key: \"\".concat(myReloadCounter, \"-\").concat(creancier.denomination_sociale),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 149\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 155\n            },\n            __self: this\n          }, creancier.denomination_sociale), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 156\n            },\n            __self: this\n          }, creancier.forme_juridique), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 157\n            },\n            __self: this\n          }, creancier.pays_siege), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 158\n            },\n            __self: this\n          }, React.createElement(NavLink, {\n            to: \"/dashboard/formCreancier\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 159\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            className: \"icone pointer\",\n            src: modifier,\n            alt: \"modifier\",\n            onClick: function onClick() {\n              return _this3.props.pageChangeSub(\"FormCreancier\", \"\".concat(creancier.id));\n            } // onClick={this.handleModification}\n            ,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 160\n            },\n            __self: this\n          }))), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 174\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            className: \"icone pointer\",\n            src: supprimer,\n            alt: \"supprimer\",\n            onClick: function onClick() {\n              return _this3.handleDelete(creancier.id, creancier.denomination_sociale);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175\n            },\n            __self: this\n          })));\n        }))), React.createElement(\"div\", {\n          className: \"buttoncreancier tc pt4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 194\n          },\n          __self: this\n        }, React.createElement(NavLink, {\n          to: \"/dashboard/formCreancier\",\n          className: \"f6 link dim br1 ph3 pv2 mt2 mb4 dib white bg-dark-blue \",\n          onClick: function onClick() {\n            return _this3.props.pageChangeSub(\"FormCreancier\");\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, \"Cr\\xE9er un cr\\xE9ancier\")))))\n      );\n    }\n  }]);\n\n  return Creanciers;\n}(Component);\n\nexport default Creanciers;","map":{"version":3,"sources":["/home/ben/Documents/React/paris-js-0918-groupe2-react/src/components/creanciers.js"],"names":["React","Component","supprimer","modifier","NavLink","Axios","confirmAlert","Creanciers","state","creanciers","creanciersFiltered","creanciersSearch","myReloadCounter","reloadNow","id","setState","previousState","filter","creancier","forceUpdate","handleDelete","denomination","myId","title","message","buttons","label","onClick","put","active","then","response","alert","console","log","catch","error","mySearch","denomination_sociale","toLowerCase","includes","handleSearch","e","target","value","length","get","data","myCreanciers","slice","map","forme_juridique","pays_siege","props","pageChangeSub"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,sCAAtB;AACA,OAAOC,QAAP,MAAqB,qCAArB;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,OAAO,aAAP;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,QAA6B,qBAA7B;AACA,OAAO,iDAAP,C,CAEA;;IAEMC,U;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,UAAU,EAAE,EADN;AAENC,MAAAA,kBAAkB,EAAE,EAFd;AAGNC,MAAAA,gBAAgB,EAAE,EAHZ;AAINC,MAAAA,eAAe,EAAE;AAJX,K;;UAORC,S,GAAY,UAAAC,EAAE,EAAI;AAChB,YAAKC,QAAL,CAAc,UAAAC,aAAa;AAAA,eAAK;AAC9BP,UAAAA,UAAU,EAAEO,aAAa,CAACP,UADI;AAE9BC,UAAAA,kBAAkB,EAAEM,aAAa,CAACN,kBAAd,CAAiCO,MAAjC,CAClB,UAAAC,SAAS;AAAA,mBAAIA,SAAS,CAACJ,EAAV,KAAiBA,EAArB;AAAA,WADS,CAFU;AAK9BF,UAAAA,eAAe,EAAE,MAAKJ,KAAL,CAAWI,eAAX,GAA6B;AALhB,SAAL;AAAA,OAA3B;;AAOA,YAAKO,WAAL;AACD,K;;UAEDC,Y,GAAe,UAACN,EAAD,EAAKO,YAAL,EAAsB;AACnC,UAAMC,IAAI,GAAGR,EAAb;AACAR,MAAAA,YAAY,CAAC;AACXiB,QAAAA,KAAK,EAAE,oBADI;AAEXC,QAAAA,OAAO,EAAE,+CAFE;AAGXC,QAAAA,OAAO,EAAE,CACP;AACEC,UAAAA,KAAK,EAAE,KADT;AAEEC,UAAAA,OAAO,EAAE;AAAA,mBACPtB,KAAK,CAACuB,GAAN,gDAAkDN,IAAlD,GAA0D;AACxDO,cAAAA,MAAM,EAAE;AADgD,aAA1D,EAGGC,IAHH,CAGQ,UAAAC,QAAQ,EAAI;AAChB,oBAAKlB,SAAL,CAAeS,IAAf;;AACAU,cAAAA,KAAK,2BAAiBX,YAAjB,oCAAL;AACAY,cAAAA,OAAO,CAACC,GAAR,CAAYH,QAAZ;AACD,aAPH,EAQGI,KARH,CAQS,UAAAC,KAAK,EAAI;AACdH,cAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD,aAVH,CADO;AAAA;AAFX,SADO,EAgBP;AACEV,UAAAA,KAAK,EAAE,KADT,CAEE;;AAFF,SAhBO;AAHE,OAAD,CAAZ;AAyBD,K;;UAEDW,Q,GAAW,YAAM;AACf,YAAKtB,QAAL,CAAc;AACZL,QAAAA,kBAAkB,EAAE,MAAKF,KAAL,CAAWE,kBAAX,CAA8BO,MAA9B,CAAqC,UAAAC,SAAS;AAAA,iBAChEA,SAAS,CAACoB,oBAAV,CACGC,WADH,GAEGC,QAFH,CAEY,MAAKhC,KAAL,CAAWG,gBAAX,CAA4B4B,WAA5B,EAFZ,CADgE;AAAA,SAA9C;AADR,OAAd;AAOD,K;;UAEDE,Y,GAAe,UAAAC,CAAC,EAAI;AAClB,YAAK3B,QAAL,CAAc;AACZJ,QAAAA,gBAAgB,EAAE+B,CAAC,CAACC,MAAF,CAASC;AADf,OAAd;;AAGA,UAAI,MAAKpC,KAAL,CAAWG,gBAAX,CAA4BkC,MAA5B,GAAqC,CAAzC,EAA4C;AAC1C,cAAKR,QAAL;AACD,OAFD,MAEO;AACL,cAAKtB,QAAL,CAAc;AACZL,UAAAA,kBAAkB,EAAE,MAAKF,KAAL,CAAWC,UAAX,CAAsBQ,MAAtB,CAClB,UAAAC,SAAS;AAAA,mBAAIA,SAAS,CAACW,MAAd;AAAA,WADS;AADR,SAAd;AAKD;AACF,K;;;;;;;wCAEmB;AAAA;;AAClBxB,MAAAA,KAAK,CAACyC,GAAN,CAAU,sCAAV,EACGhB,IADH,CACQ,UAAAC,QAAQ,EAAI;AAChB,QAAA,MAAI,CAAChB,QAAL,CAAc;AACZ;AACAN,UAAAA,UAAU,EAAEsB,QAAQ,CAACgB,IAFT;AAGZ;AACArC,UAAAA,kBAAkB,EAAEqB,QAAQ,CAACgB,IAAT,CAAc9B,MAAd,CAClB,UAAAC,SAAS;AAAA,mBAAIA,SAAS,CAACW,MAAd;AAAA,WADS;AAJR,SAAd;AAQD,OAVH,EAWGM,KAXH,CAWS,UAAAC,KAAK,EAAI;AACdH,QAAAA,OAAO,CAACC,GAAR,CAAYE,KAAZ;AACD,OAbH;AAcD;;;6BAEQ;AAAA;;AACP,UAAMY,YAAY,GAAG,KAAKxC,KAAL,CAAWE,kBAAhC;AACA,UAAME,eAAe,GAAG,KAAKJ,KAAL,CAAWI,eAAnC;AACA,aACE;AACA;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAI,UAAA,SAAS,EAAC,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gDADF,EAIE;AAAI,UAAA,SAAS,EAAC,gBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAJF,CADF,CADF,EAUE;AAAK,UAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AACE,UAAA,IAAI,EAAC,MADP;AAEE,UAAA,SAAS,EAAC,YAFZ;AAGE,UAAA,WAAW,EAAC,yBAHd;AAIE,UAAA,QAAQ,EAAE,KAAK6B,YAJjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,EAOE;AAAQ,UAAA,IAAI,EAAC,QAAb;AAAsB,UAAA,SAAS,EAAC,cAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAG,UAAA,SAAS,EAAC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,CAPF,CADF,CADF,CAVF,EA2BE;AAAK,UAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAK,UAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAO,UAAA,SAAS,EAAC,iBAAjB;AAAmC,UAAA,WAAW,EAAC,GAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAI,UAAA,SAAS,EAAC,aAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF,EAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBALF,CADF,CADF,EAUE;AAAO,UAAA,SAAS,EAAC,SAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACGO,YAAY,CAACC,KAAb,CAAmB,EAAnB,EAAuBC,GAAvB,CAA2B,UAAAhC,SAAS,EAAI;AACvC,iBACE;AACE,YAAA,SAAS,EAAC,aADZ;AAEE,YAAA,GAAG,YAAKN,eAAL,cACDM,SAAS,CAACoB,oBADT,CAFL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAKpB,SAAS,CAACoB,oBAAf,CANF,EAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAKpB,SAAS,CAACiC,eAAf,CAPF,EAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAKjC,SAAS,CAACkC,UAAf,CARF,EASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,oBAAC,OAAD;AAAS,YAAA,EAAE,EAAC,0BAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AACE,YAAA,SAAS,EAAC,eADZ;AAEE,YAAA,GAAG,EAAEjD,QAFP;AAGE,YAAA,GAAG,EAAC,UAHN;AAIE,YAAA,OAAO,EAAE;AAAA,qBACP,MAAI,CAACkD,KAAL,CAAWC,aAAX,CACE,eADF,YAEKpC,SAAS,CAACJ,EAFf,EADO;AAAA,aAJX,CAUE;AAVF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADF,CATF,EAyBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AACE,YAAA,SAAS,EAAC,eADZ;AAEE,YAAA,GAAG,EAAEZ,SAFP;AAGE,YAAA,GAAG,EAAC,WAHN;AAIE,YAAA,OAAO,EAAE;AAAA,qBACP,MAAI,CAACkB,YAAL,CACEF,SAAS,CAACJ,EADZ,EAEEI,SAAS,CAACoB,oBAFZ,CADO;AAAA,aAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CAzBF,CADF;AAyCD,SA1CA,CADH,CAVF,CADF,EA2DE;AAAK,UAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACE,oBAAC,OAAD;AACE,UAAA,EAAE,EAAC,0BADL;AAEE,UAAA,SAAS,EAAC,yDAFZ;AAGE,UAAA,OAAO,EAAE;AAAA,mBAAM,MAAI,CAACe,KAAL,CAAWC,aAAX,CAAyB,eAAzB,CAAN;AAAA,WAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sCADF,CA3DF,CADF,CA3BF;AAFF;AAsGD;;;;EAnMsBrD,S;;AAsMzB,eAAeM,UAAf","sourcesContent":["import React, { Component } from \"react\";\nimport supprimer from \"./Icones_Arigoni/icone_supprimer.png\";\nimport modifier from \"./Icones_Arigoni/icone_modifier.png\";\nimport { NavLink } from \"react-router-dom\";\nimport \"./debiteurs\";\nimport Axios from \"axios\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\n\n//import formulairedebiteurs et formulairecreacier pour les routes\n\nclass Creanciers extends Component {\n  state = {\n    creanciers: [],\n    creanciersFiltered: [],\n    creanciersSearch: \"\",\n    myReloadCounter: 0\n  };\n\n  reloadNow = id => {\n    this.setState(previousState => ({\n      creanciers: previousState.creanciers,\n      creanciersFiltered: previousState.creanciersFiltered.filter(\n        creancier => creancier.id !== id\n      ),\n      myReloadCounter: this.state.myReloadCounter + 1\n    }));\n    this.forceUpdate();\n  };\n\n  handleDelete = (id, denomination) => {\n    const myId = id;\n    confirmAlert({\n      title: \"Merci de confirmer\",\n      message: \"Voulez-vous vraiment supprimer ce créancier ?\",\n      buttons: [\n        {\n          label: \"Oui\",\n          onClick: () =>\n            Axios.put(`http://localhost:4848/api/creanciers/${myId}`, {\n              active: \"false\"\n            })\n              .then(response => {\n                this.reloadNow(myId);\n                alert(`Le créancier ${denomination} a bien été supprimé.`);\n                console.log(response);\n              })\n              .catch(error => {\n                console.log(error);\n              })\n        },\n        {\n          label: \"Non\"\n          // onClick: () => alert(\"Le créancier n'a pas été supprimé.\")\n        }\n      ]\n    });\n  };\n\n  mySearch = () => {\n    this.setState({\n      creanciersFiltered: this.state.creanciersFiltered.filter(creancier =>\n        creancier.denomination_sociale\n          .toLowerCase()\n          .includes(this.state.creanciersSearch.toLowerCase())\n      )\n    });\n  };\n\n  handleSearch = e => {\n    this.setState({\n      creanciersSearch: e.target.value\n    });\n    if (this.state.creanciersSearch.length > 1) {\n      this.mySearch();\n    } else {\n      this.setState({\n        creanciersFiltered: this.state.creanciers.filter(\n          creancier => creancier.active\n        )\n      });\n    }\n  };\n\n  componentDidMount() {\n    Axios.get(\"http://localhost:4848/api/creanciers\")\n      .then(response => {\n        this.setState({\n          // returns all creanciers\n          creanciers: response.data,\n          // returns all creanciers whose active status is true\n          creanciersFiltered: response.data.filter(\n            creancier => creancier.active\n          )\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n  render() {\n    const myCreanciers = this.state.creanciersFiltered;\n    const myReloadCounter = this.state.myReloadCounter;\n    return (\n      //tableau informations des créanciers\n      <div className=\"creancier\">\n        <div className=\"fl w-60\">\n          <div className=\"title_créancier pl4\">\n            <h1 className=\"f2 lh-copy nowrap\">\n              Informations sur les créanciers\n            </h1>\n            <h2 className=\"pt2 f4 lh-copy\">Liste des créanciers</h2>\n          </div>\n        </div>\n        {/* searchbar */}\n        <div className=\"fl w-40\">\n          <div className=\"wraparigo\">\n            <div className=\"searcharigo\">\n              <input\n                type=\"text\"\n                className=\"searchTerm\"\n                placeholder=\"trouver un créancier\"\n                onChange={this.handleSearch}\n              />\n              <button type=\"submit\" className=\"searchButton\">\n                <i className=\"fa fa-search\" />\n              </button>\n            </div>\n          </div>\n        </div>\n\n        {/* tableau */}\n        <div className=\" tableau fl w-100 pa4 \">\n          <div className=\"overflow-auto\">\n            <table className=\"f6 w-100 center\" cellSpacing=\"0\">\n              <thead>\n                <tr className=\"stripe-dark\">\n                  <th>Dénomination sociale</th>\n                  <th>Forme juridique</th>\n                  <th>Pays</th>\n                  <th>Modifier</th>\n                  <th>Supprimer</th>\n                </tr>\n              </thead>\n              <tbody className=\"lh-copy\">\n                {myCreanciers.slice(10).map(creancier => {\n                  return (\n                    <tr\n                      className=\"stripe-dark\"\n                      key={`${myReloadCounter}-${\n                        creancier.denomination_sociale\n                      }`}\n                    >\n                      <td>{creancier.denomination_sociale}</td>\n                      <td>{creancier.forme_juridique}</td>\n                      <td>{creancier.pays_siege}</td>\n                      <td>\n                        <NavLink to=\"/dashboard/formCreancier\">\n                          <img\n                            className=\"icone pointer\"\n                            src={modifier}\n                            alt=\"modifier\"\n                            onClick={() =>\n                              this.props.pageChangeSub(\n                                \"FormCreancier\",\n                                `${creancier.id}`\n                              )\n                            }\n                            // onClick={this.handleModification}\n                          />\n                        </NavLink>\n                      </td>\n                      <td>\n                        <img\n                          className=\"icone pointer\"\n                          src={supprimer}\n                          alt=\"supprimer\"\n                          onClick={() =>\n                            this.handleDelete(\n                              creancier.id,\n                              creancier.denomination_sociale\n                            )\n                          }\n                        />\n                      </td>\n                    </tr>\n                  );\n                })}\n              </tbody>\n            </table>\n\n            {/* Button créer un créancier */}\n            <div className=\"buttoncreancier tc pt4\">\n              <NavLink\n                to=\"/dashboard/formCreancier\"\n                className=\"f6 link dim br1 ph3 pv2 mt2 mb4 dib white bg-dark-blue \"\n                onClick={() => this.props.pageChangeSub(\"FormCreancier\")}\n              >\n                Créer un créancier\n              </NavLink>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Creanciers;\n"]},"metadata":{},"sourceType":"module"}