{"ast":null,"code":"import _classCallCheck from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ben/Documents/React/paris-js-0918-groupe2-react/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ben/Documents/React/paris-js-0918-groupe2-react/src/components/Historique.js\";\nimport React from \"react\"; // import supprimer from \"./Icones_Arigoni/icone_supprimer.png\";\n\nimport download from \"./Icones_Arigoni/icone_upload.png\";\nimport Axios from \"axios\";\nimport \"./Historique.css\";\nimport supprimer from \"./Icones_Arigoni/icone_supprimer.png\";\nimport modifier from \"./Icones_Arigoni/icone_modifier.png\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\n\nvar Historique =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Historique, _React$Component);\n\n  function Historique() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Historique);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Historique)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      checkboxActive: true,\n      actions: [],\n      actionsActive: [],\n      actionsNotActive: [],\n      creanciers: [],\n      debiteurs: []\n    };\n\n    _this.handleTabSwitch = function () {\n      return _this.state.checkboxActive ? _this.state.actionsActive : _this.state.actionsNotActive;\n    };\n\n    _this.downloadDoc = function (doc, id) {\n      if (_this.state.checkboxActive === true) {\n        if (doc === \"med\") {\n          var myAction = _this.state.actionsActive.filter(function (action) {\n            return action.id === id;\n          });\n\n          var url = myAction[0].option_1;\n\n          if (url !== null) {\n            window.open(url);\n          } else {\n            alert(\"Vous n'avez pas encore géréné ce document.\");\n          }\n        } else if (doc === \"idp\") {\n          var _myAction = _this.state.actionsActive.filter(function (action) {\n            return action.id === id;\n          });\n\n          var _url = _myAction[0].option_2;\n\n          if (_url !== null) {\n            window.open(_url);\n          } else {\n            alert(\"Vous n'avez pas encore géréné ce document.\");\n          }\n        } else if (doc === \"tr\") {\n          var _myAction2 = _this.state.actionsActive.filter(function (action) {\n            return action.id === id;\n          });\n\n          var _url2 = _myAction2[0].option_3;\n\n          if (_url2 !== null) {\n            window.open(_url2);\n          } else {\n            alert(\"Vous n'avez pas encore géréné ce document.\");\n          }\n        }\n      } else {\n        if (doc === \"med\") {\n          var _myAction3 = _this.state.actionsNotActive.filter(function (action) {\n            return action.id === id;\n          });\n\n          var _url3 = _myAction3[0].option_1;\n\n          if (_url3 !== null) {\n            window.open(_url3);\n          } else {\n            alert(\"Vous n'avez pas encore géréné ce document.\");\n          }\n        } else if (doc === \"idp\") {\n          var _myAction4 = _this.state.actionsNotActive.filter(function (action) {\n            return action.id === id;\n          });\n\n          var _url4 = _myAction4[0].option_2;\n\n          if (_url4 !== null) {\n            window.open(_url4);\n          } else {\n            alert(\"Vous n'avez pas encore géréné ce document.\");\n          }\n        } else if (doc === \"tr\") {\n          var _myAction5 = _this.state.actionsNotActive.filter(function (action) {\n            return action.id === id;\n          });\n\n          var _url5 = _myAction5[0].option_3;\n\n          if (_url5 !== null) {\n            window.open(_url5);\n          } else {\n            alert(\"Vous n'avez pas encore géréné ce document.\");\n          }\n        }\n      }\n    };\n\n    _this.handleDelete = function (id, denomination) {\n      if (_this.state.checkboxActive === false) {\n        // alert(`L'action ${denomination} est déjà clôturée.`);\n        confirmAlert({\n          title: \"Merci de confirmer\",\n          message: \"L'action \".concat(denomination, \" est cl\\xF4tur\\xE9e. \\xCAtes-vous s\\xFBr de vouloir la rendre active \\xE0 nouveau?\"),\n          buttons: [{\n            label: \"Oui\",\n            onClick: function onClick() {\n              return Axios.put(\"http://localhost:4848/api/actions/\".concat(id), {\n                active: \"true\"\n              }).then(function (response) {\n                Axios.get(\"http://localhost:4848/api/actions\").then(function (response) {\n                  _this.setState({\n                    actions: response.data,\n                    // returns filtered actions\n                    actionsActive: response.data.filter(function (action) {\n                      return action.active === true;\n                    }),\n                    actionsNotActive: response.data.filter(function (action) {\n                      return action.active === false;\n                    })\n                  });\n                }).catch(function (error) {\n                  console.log(error);\n                });\n                alert(\"L'action \".concat(denomination, \" est de nouveau active.\"));\n                console.log(response);\n              }).catch(function (error) {\n                console.log(error);\n              });\n            }\n          }, {\n            label: \"Non\" // onClick: () => alert(\"Le créancier n'a pas été supprimé.\")\n\n          }]\n        });\n      } else {\n        confirmAlert({\n          title: \"Merci de confirmer\",\n          message: \"Voulez-vous vraiment cl\\xF4turer l'action \".concat(denomination, \"?\"),\n          buttons: [{\n            label: \"Oui\",\n            onClick: function onClick() {\n              return Axios.put(\"http://localhost:4848/api/actions/\".concat(id), {\n                active: \"false\"\n              }).then(function (response) {\n                // const myActive = this.state.actionsActive.filter(\n                //   a => a.id !== id\n                // );\n                // this.setState({\n                //   actionsActive: myActive\n                // });\n                Axios.get(\"http://localhost:4848/api/actions\").then(function (response) {\n                  _this.setState({\n                    actions: response.data,\n                    // returns filtered actions\n                    actionsActive: response.data.filter(function (action) {\n                      return action.active === true;\n                    }),\n                    actionsNotActive: response.data.filter(function (action) {\n                      return action.active === false;\n                    })\n                  });\n                }).catch(function (error) {\n                  console.log(error);\n                });\n                alert(\"L'action \".concat(denomination, \" a bien \\xE9t\\xE9 cl\\xF4tur\\xE9e.\"));\n                console.log(response);\n              }).catch(function (error) {\n                console.log(error);\n              });\n            }\n          }, {\n            label: \"Non\" // onClick: () => alert(\"Le créancier n'a pas été supprimé.\")\n\n          }]\n        });\n      }\n    };\n\n    _this.handleCheckbox = function () {\n      _this.setState({\n        checkboxActive: !_this.state.checkboxActive\n      });\n    };\n\n    _this.handleCheckboxDisplay = function () {\n      return _this.state.checkboxActive ? \"actions en cours\" : \"actions clôturées\";\n    };\n\n    _this.handleCreancier = function (actionId) {\n      var selectedAction = _this.state.actions.filter(function (a) {\n        return a.id === actionId;\n      });\n\n      var myCreancier = _this.state.creanciers.filter(function (c) {\n        return c.id === selectedAction[0].creancierId;\n      });\n\n      return myCreancier[0].denomination_sociale;\n    };\n\n    _this.handleDebiteur = function (actionId) {\n      var selectedAction = _this.state.actions.filter(function (a) {\n        return a.id === actionId;\n      });\n\n      var myDebiteur = _this.state.debiteurs.filter(function (c) {\n        return c.id === selectedAction[0].debiteurId;\n      });\n\n      return myDebiteur[0].denomination_sociale;\n    };\n\n    return _this;\n  }\n\n  _createClass(Historique, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Axios.get(\"http://localhost:4848/api/actions\").then(function (response) {\n        _this2.setState({\n          actions: response.data,\n          // returns filtered actions\n          actionsActive: response.data.filter(function (action) {\n            return action.active === true;\n          }),\n          actionsNotActive: response.data.filter(function (action) {\n            return action.active === false;\n          })\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      Axios.get(\"http://localhost:4848/api/creanciers\").then(function (response) {\n        _this2.setState({\n          creanciers: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n      Axios.get(\"http://localhost:4848/api/debiteurs\").then(function (response) {\n        _this2.setState({\n          debiteurs: response.data\n        });\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var actionsActive = this.handleTabSwitch();\n\n      if (this.state.creanciers[0] !== undefined && this.state.debiteurs[0] !== undefined && this.state.actions[0] !== undefined) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"fl w-100\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"title_d\\xE9biteur pl4\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 260\n          },\n          __self: this\n        }, React.createElement(\"h1\", {\n          className: \"f2 tc lh-copy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 261\n          },\n          __self: this\n        }, \" Historique des actions \")), React.createElement(\"div\", {\n          className: \"fl w-100 \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 263\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"fl w-100 tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 264\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"checkbox-wrap custom style-2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 265\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          type: \"checkbox\",\n          id: \"custom-checkbox-2\",\n          onClick: function onClick() {\n            return _this3.handleCheckbox();\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266\n          },\n          __self: this\n        }), React.createElement(\"label\", {\n          htmlFor: \"custom-checkbox-2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 271\n          },\n          __self: this\n        }, \"G\\xE9rer les \", this.handleCheckboxDisplay()))), React.createElement(\"div\", {\n          className: \"fl w-40\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 277\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"fl w-100 pt2 pl4 pr4 \",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"overflow-auto\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 281\n          },\n          __self: this\n        }, React.createElement(\"table\", {\n          className: \"f6 w-100 center\",\n          cellSpacing: \"0\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 282\n          },\n          __self: this\n        }, React.createElement(\"thead\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283\n          },\n          __self: this\n        }, React.createElement(\"tr\", {\n          className: \"stripe-dark\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284\n          },\n          __self: this\n        }, React.createElement(\"th\", {\n          className: \"fw6 tl pa3 bg-white tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285\n          },\n          __self: this\n        }, \"Cr\\xE9ancier\"), React.createElement(\"th\", {\n          className: \"fw6 tl pa3 bg-white tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286\n          },\n          __self: this\n        }, \"D\\xE9biteur\"), React.createElement(\"th\", {\n          className: \"fw6 tl pa3 bg-white tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287\n          },\n          __self: this\n        }, \"Nom de l'action\"), React.createElement(\"th\", {\n          className: \"fw6 tl pa3 bg-white tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290\n          },\n          __self: this\n        }, \"Modifier statut\"), React.createElement(\"th\", {\n          className: \"fw6 tl pa3 bg-white tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293\n          },\n          __self: this\n        }, \"Mise en demeure\"), React.createElement(\"th\", {\n          className: \"fw6 tl pa3 bg-white tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296\n          },\n          __self: this\n        }, \"Injonction de payer\"), React.createElement(\"th\", {\n          className: \"fw6 tl pa3 bg-white tc\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 299\n          },\n          __self: this\n        }, \"Tableau recap\"))), React.createElement(\"tbody\", {\n          className: \"lh-copy\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 302\n          },\n          __self: this\n        }, actionsActive.sort(function (a, b) {\n          return b.id - a.id;\n        }).slice(0, 200).map(function (action) {\n          return React.createElement(\"tr\", {\n            className: \"stripe-dark tc\",\n            key: \"\".concat(action.id),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 308\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 309\n            },\n            __self: this\n          }, _this3.handleCreancier(action.id)), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 310\n            },\n            __self: this\n          }, _this3.handleDebiteur(action.id)), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 311\n            },\n            __self: this\n          }, action.nom_action), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 312\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            className: \"icone pointer\",\n            src: supprimer,\n            alt: \"Modifier le statut de l'action\",\n            onClick: function onClick() {\n              return _this3.handleDelete(action.id, action.nom_action);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 313\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 325\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            className: \"icone download pointer\",\n            src: download,\n            alt: \"download\",\n            onClick: function onClick() {\n              return _this3.downloadDoc(\"med\", action.id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 326\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 335\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            className: \"icone download pointer\",\n            src: download,\n            alt: \"download\",\n            onClick: function onClick() {\n              return _this3.downloadDoc(\"idp\", action.id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 336\n            },\n            __self: this\n          })), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 345\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            className: \"icone download pointer\",\n            src: download,\n            alt: \"download\",\n            onClick: function onClick() {\n              return _this3.downloadDoc(\"tr\", action.id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 346\n            },\n            __self: this\n          })));\n        })))))));\n      } else return React.createElement(\"h1\", {\n        className: \"f2 tc lh-copy\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 367\n        },\n        __self: this\n      }, \" \", \"Il n'y a pas encore d'actions dans l'historique.\", \" \");\n    }\n  }]);\n\n  return Historique;\n}(React.Component);\n\nexport default Historique;","map":{"version":3,"sources":["/home/ben/Documents/React/paris-js-0918-groupe2-react/src/components/Historique.js"],"names":["React","download","Axios","supprimer","modifier","confirmAlert","Historique","state","checkboxActive","actions","actionsActive","actionsNotActive","creanciers","debiteurs","handleTabSwitch","downloadDoc","doc","id","myAction","filter","action","url","option_1","window","open","alert","option_2","option_3","handleDelete","denomination","title","message","buttons","label","onClick","put","active","then","response","get","setState","data","catch","error","console","log","handleCheckbox","handleCheckboxDisplay","handleCreancier","actionId","selectedAction","a","myCreancier","c","creancierId","denomination_sociale","handleDebiteur","myDebiteur","debiteurId","undefined","sort","b","slice","map","nom_action","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\n// import supprimer from \"./Icones_Arigoni/icone_supprimer.png\";\nimport download from \"./Icones_Arigoni/icone_upload.png\";\nimport Axios from \"axios\";\nimport \"./Historique.css\";\nimport supprimer from \"./Icones_Arigoni/icone_supprimer.png\";\nimport modifier from \"./Icones_Arigoni/icone_modifier.png\";\nimport { confirmAlert } from \"react-confirm-alert\";\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\n\nclass Historique extends React.Component {\n  state = {\n    checkboxActive: true,\n    actions: [],\n    actionsActive: [],\n    actionsNotActive: [],\n    creanciers: [],\n    debiteurs: []\n  };\n\n  componentDidMount() {\n    Axios.get(\"http://localhost:4848/api/actions\")\n      .then(response => {\n        this.setState({\n          actions: response.data,\n          // returns filtered actions\n          actionsActive: response.data.filter(action => action.active === true),\n          actionsNotActive: response.data.filter(\n            action => action.active === false\n          )\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n    Axios.get(\"http://localhost:4848/api/creanciers\")\n      .then(response => {\n        this.setState({\n          creanciers: response.data\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n    Axios.get(\"http://localhost:4848/api/debiteurs\")\n      .then(response => {\n        this.setState({\n          debiteurs: response.data\n        });\n      })\n      .catch(error => {\n        console.log(error);\n      });\n  }\n\n  handleTabSwitch = () => {\n    return this.state.checkboxActive\n      ? this.state.actionsActive\n      : this.state.actionsNotActive;\n  };\n\n  downloadDoc = (doc, id) => {\n    if (this.state.checkboxActive === true) {\n      if (doc === \"med\") {\n        let myAction = this.state.actionsActive.filter(\n          action => action.id === id\n        );\n        let url = myAction[0].option_1;\n        if (url !== null) {\n          window.open(url);\n        } else {\n          alert(\"Vous n'avez pas encore géréné ce document.\");\n        }\n      } else if (doc === \"idp\") {\n        let myAction = this.state.actionsActive.filter(\n          action => action.id === id\n        );\n        let url = myAction[0].option_2;\n        if (url !== null) {\n          window.open(url);\n        } else {\n          alert(\"Vous n'avez pas encore géréné ce document.\");\n        }\n      } else if (doc === \"tr\") {\n        let myAction = this.state.actionsActive.filter(\n          action => action.id === id\n        );\n        let url = myAction[0].option_3;\n        if (url !== null) {\n          window.open(url);\n        } else {\n          alert(\"Vous n'avez pas encore géréné ce document.\");\n        }\n      }\n    } else {\n      if (doc === \"med\") {\n        let myAction = this.state.actionsNotActive.filter(\n          action => action.id === id\n        );\n        let url = myAction[0].option_1;\n        if (url !== null) {\n          window.open(url);\n        } else {\n          alert(\"Vous n'avez pas encore géréné ce document.\");\n        }\n      } else if (doc === \"idp\") {\n        let myAction = this.state.actionsNotActive.filter(\n          action => action.id === id\n        );\n        let url = myAction[0].option_2;\n        if (url !== null) {\n          window.open(url);\n        } else {\n          alert(\"Vous n'avez pas encore géréné ce document.\");\n        }\n      } else if (doc === \"tr\") {\n        let myAction = this.state.actionsNotActive.filter(\n          action => action.id === id\n        );\n        let url = myAction[0].option_3;\n        if (url !== null) {\n          window.open(url);\n        } else {\n          alert(\"Vous n'avez pas encore géréné ce document.\");\n        }\n      }\n    }\n  };\n\n  handleDelete = (id, denomination) => {\n    if (this.state.checkboxActive === false) {\n      // alert(`L'action ${denomination} est déjà clôturée.`);\n      confirmAlert({\n        title: \"Merci de confirmer\",\n        message: `L'action ${denomination} est clôturée. Êtes-vous sûr de vouloir la rendre active à nouveau?`,\n        buttons: [\n          {\n            label: \"Oui\",\n            onClick: () =>\n              Axios.put(`http://localhost:4848/api/actions/${id}`, {\n                active: \"true\"\n              })\n                .then(response => {\n                  Axios.get(\"http://localhost:4848/api/actions\")\n                    .then(response => {\n                      this.setState({\n                        actions: response.data,\n                        // returns filtered actions\n                        actionsActive: response.data.filter(\n                          action => action.active === true\n                        ),\n                        actionsNotActive: response.data.filter(\n                          action => action.active === false\n                        )\n                      });\n                    })\n                    .catch(error => {\n                      console.log(error);\n                    });\n                  alert(`L'action ${denomination} est de nouveau active.`);\n                  console.log(response);\n                })\n                .catch(error => {\n                  console.log(error);\n                })\n          },\n          {\n            label: \"Non\"\n            // onClick: () => alert(\"Le créancier n'a pas été supprimé.\")\n          }\n        ]\n      });\n    } else {\n      confirmAlert({\n        title: \"Merci de confirmer\",\n        message: `Voulez-vous vraiment clôturer l'action ${denomination}?`,\n        buttons: [\n          {\n            label: \"Oui\",\n            onClick: () =>\n              Axios.put(`http://localhost:4848/api/actions/${id}`, {\n                active: \"false\"\n              })\n                .then(response => {\n                  // const myActive = this.state.actionsActive.filter(\n                  //   a => a.id !== id\n                  // );\n                  // this.setState({\n                  //   actionsActive: myActive\n                  // });\n                  Axios.get(\"http://localhost:4848/api/actions\")\n                    .then(response => {\n                      this.setState({\n                        actions: response.data,\n                        // returns filtered actions\n                        actionsActive: response.data.filter(\n                          action => action.active === true\n                        ),\n                        actionsNotActive: response.data.filter(\n                          action => action.active === false\n                        )\n                      });\n                    })\n                    .catch(error => {\n                      console.log(error);\n                    });\n\n                  alert(`L'action ${denomination} a bien été clôturée.`);\n                  console.log(response);\n                })\n                .catch(error => {\n                  console.log(error);\n                })\n          },\n          {\n            label: \"Non\"\n            // onClick: () => alert(\"Le créancier n'a pas été supprimé.\")\n          }\n        ]\n      });\n    }\n  };\n\n  handleCheckbox = () => {\n    this.setState({\n      checkboxActive: !this.state.checkboxActive\n    });\n  };\n\n  handleCheckboxDisplay = () => {\n    return this.state.checkboxActive ? \"actions en cours\" : \"actions clôturées\";\n  };\n\n  handleCreancier = actionId => {\n    const selectedAction = this.state.actions.filter(a => a.id === actionId);\n    const myCreancier = this.state.creanciers.filter(\n      c => c.id === selectedAction[0].creancierId\n    );\n    return myCreancier[0].denomination_sociale;\n  };\n\n  handleDebiteur = actionId => {\n    const selectedAction = this.state.actions.filter(a => a.id === actionId);\n    const myDebiteur = this.state.debiteurs.filter(\n      c => c.id === selectedAction[0].debiteurId\n    );\n    return myDebiteur[0].denomination_sociale;\n  };\n\n  render() {\n    const actionsActive = this.handleTabSwitch();\n    if (\n      this.state.creanciers[0] !== undefined &&\n      this.state.debiteurs[0] !== undefined &&\n      this.state.actions[0] !== undefined\n    ) {\n      return (\n        <div>\n          <div className=\"fl w-100\">\n            <div className=\"title_débiteur pl4\">\n              <h1 className=\"f2 tc lh-copy\"> Historique des actions </h1>\n            </div>\n            <div className=\"fl w-100 \">\n              <div className=\"fl w-100 tc\">\n                <div className=\"checkbox-wrap custom style-2\">\n                  <input\n                    type=\"checkbox\"\n                    id=\"custom-checkbox-2\"\n                    onClick={() => this.handleCheckbox()}\n                  />\n                  <label htmlFor=\"custom-checkbox-2\">\n                    Gérer les {this.handleCheckboxDisplay()}\n                  </label>\n                </div>\n              </div>\n\n              <div className=\"fl w-40\" />\n            </div>\n            {/* tableau */}\n            <div className=\"fl w-100 pt2 pl4 pr4 \">\n              <div className=\"overflow-auto\">\n                <table className=\"f6 w-100 center\" cellSpacing=\"0\">\n                  <thead>\n                    <tr className=\"stripe-dark\">\n                      <th className=\"fw6 tl pa3 bg-white tc\">Créancier</th>\n                      <th className=\"fw6 tl pa3 bg-white tc\">Débiteur</th>\n                      <th className=\"fw6 tl pa3 bg-white tc\">\n                        Nom de l'action\n                      </th>\n                      <th className=\"fw6 tl pa3 bg-white tc\">\n                        Modifier statut\n                      </th>\n                      <th className=\"fw6 tl pa3 bg-white tc\">\n                        Mise en demeure\n                      </th>\n                      <th className=\"fw6 tl pa3 bg-white tc\">\n                        Injonction de payer\n                      </th>\n                      <th className=\"fw6 tl pa3 bg-white tc\">Tableau recap</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"lh-copy\">\n                    {actionsActive\n                      .sort((a, b) => b.id - a.id)\n                      .slice(0, 200)\n                      .map(action => {\n                        return (\n                          <tr className=\"stripe-dark tc\" key={`${action.id}`}>\n                            <td>{this.handleCreancier(action.id)}</td>\n                            <td>{this.handleDebiteur(action.id)}</td>\n                            <td>{action.nom_action}</td>\n                            <td>\n                              <img\n                                className=\"icone pointer\"\n                                src={supprimer}\n                                alt=\"Modifier le statut de l'action\"\n                                onClick={() =>\n                                  this.handleDelete(\n                                    action.id,\n                                    action.nom_action\n                                  )\n                                }\n                              />\n                            </td>\n                            <td>\n                              <img\n                                className=\"icone download pointer\"\n                                src={download}\n                                alt=\"download\"\n                                onClick={() =>\n                                  this.downloadDoc(\"med\", action.id)\n                                }\n                              />\n                            </td>\n                            <td>\n                              <img\n                                className=\"icone download pointer\"\n                                src={download}\n                                alt=\"download\"\n                                onClick={() =>\n                                  this.downloadDoc(\"idp\", action.id)\n                                }\n                              />\n                            </td>\n                            <td>\n                              <img\n                                className=\"icone download pointer\"\n                                src={download}\n                                alt=\"download\"\n                                onClick={() =>\n                                  this.downloadDoc(\"tr\", action.id)\n                                }\n                              />\n                            </td>\n                          </tr>\n                        );\n                      })}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      );\n    } else\n      return (\n        <h1 className=\"f2 tc lh-copy\">\n          {\" \"}\n          Il n'y a pas encore d'actions dans l'historique.{\" \"}\n        </h1>\n      );\n  }\n}\n\nexport default Historique;\n"]},"metadata":{},"sourceType":"module"}